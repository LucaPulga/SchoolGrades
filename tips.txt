<USER>
//public int? IdUserCategory { get => idUserCategory; set => idUserCategory = value; }
public int IdUserCategory { get => idUserCategory; set => idUserCategory = value; }

<DBANDBUSINESS>
 internal int? SaveUser(User user, DbConnection conn)
        {
            bool leaveConnectionOpen = true;
            if (conn == null)
            {
                conn = dl.Connect();
                leaveConnectionOpen = false;
            }
            DbCommand cmd = conn.CreateCommand();
            cmd.CommandText = "UPDATE Users " +
                "SET" +
                " username=" + user.Username +
                ",lastName='" + SqlVal.SqlString(user.LastName) + "'" +
                ",firstName='" + SqlVal.SqlString(user.FirstName) + "'" +
                ",email='" + SqlVal.SqlString(user.Email) + "'" +
                ",password='" + SqlVal.SqlString(user.Password) + "'" +
                //",creationTime='" + SqlVal.SqlString(user.CreationTime) + "'" +
                ",salt='" + SqlVal.SqlString(user.Salt) + "'" +
                ",idUserCategory'" + SqlVal.SqlString(user.IdUserCategory.ToString()) + "'" +
                " WHERE idStudent = " + user.IdUserCategory.ToString() +
                ";";
            cmd.ExecuteNonQuery();
            cmd.Dispose();
            if (!leaveConnectionOpen)
            {
                conn.Close();
                conn.Dispose();
            }
            return user.IdUserCategory;
        }

<CON LISTBOX>
private void frmUsersManagement_Load(object sender, EventArgs e)
        {
            listOfAllUsers = dl.GetAllUsers();
            lstUsers.DataSource = listOfAllUsers;
        }

        private void lstUsers_SelectedIndexChanged(object sender, EventArgs e)
        {
            User currentUser = (User)(listOfAllUsers[lstUsers.SelectedIndex]);
            txtUsername.Text = currentUser.Username;
            txtName.Text = currentUser.FirstName;
            txtSurname.Text = currentUser.LastName;
            txtEmail.Text = currentUser.Email;
            txtDescription.Text = currentUser.Description;
            txtPassword.Text = "";
        }

        private void btnNewUser_Click_1(object sender, EventArgs e)
        {
            User newUser = new User(txtUsername.Text, txtPassword.Text);
            newUser.FirstName = txtName.Text;
            newUser.LastName = txtSurname.Text;
            newUser.Email = txtEmail.Text;
            newUser.Description = txtDescription.Text;
            newUser.IdUserCategory = int.Parse(txtIdCategory.Text); // TODO
            newUser.Salt = txtIdSalt.Text;
            bl.CreateUser(newUser);
            listOfAllUsers = dl.GetAllUsers();
            lstUsers.DataSource = listOfAllUsers;
        }

        private void btnModifyUser_Click_1(object sender, EventArgs e)
        {
            User newUser = new User(txtUsername.Text, "");
            newUser.FirstName = txtName.Text;
            newUser.LastName = txtSurname.Text;
            newUser.Email = txtEmail.Text;
            newUser.Description = txtDescription.Text;
            newUser.IdUserCategory = int.Parse(txtIdCategory.Text); // TODO
            newUser.Salt = txtIdSalt.Text;
            bl.UpdateUser(newUser);
            listOfAllUsers = dl.GetAllUsers();
            lstUsers.DataSource = listOfAllUsers;
        }
